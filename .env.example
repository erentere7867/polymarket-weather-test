# =============================================================================
# POLYMARKET CONFIGURATION
# =============================================================================

# Polygon Wallet Private Key (without 0x prefix)
# Used to sign transactions and derive API keys
POLYMARKET_PRIVATE_KEY=your_private_key_here

# Polymarket API Credentials (derived from private key on first run)
# You can leave these empty - they will be auto-generated
# Or paste existing credentials if you have them
POLYMARKET_API_KEY=
POLYMARKET_SECRET=
POLYMARKET_PASSPHRASE=

# Polygon RPC URL
POLYGON_RPC_URL=https://polygon-rpc.com

# USDC Contract Address on Polygon
USDC_CONTRACT_ADDRESS=0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174

# =============================================================================
# WEATHER API CONFIGURATION
# =============================================================================

# Open-Meteo (Global, Free) is used by default if other providers are missing or fail.
# NOAA (US, Free) is always prioritized for US locations.

# OpenWeatherMap API Key (https://openweathermap.org/api)
OPENWEATHER_API_KEY=

# Tomorrow.io API Key (https://www.tomorrow.io/weather-api/)
TOMORROW_API_KEY=

# WeatherAPI Key (https://www.weatherapi.com/)
WEATHERAPI_KEY=

# Weatherbit API Key (https://www.weatherbit.io/api)
WEATHERBIT_API_KEY=

# Visual Crossing API Key (https://www.visualcrossing.com/weather-api)
VISUALCROSSING_API_KEY=

# Meteosource API Key (https://www.meteosource.com/)
METEOSOURCE_API_KEY=

# =============================================================================
# BOT CONFIGURATION
# =============================================================================

# Run in simulation mode (no real trades)
# Set to false for live trading
SIMULATION_MODE=true

# Maximum USDC per trade
MAX_POSITION_SIZE=50

# Minimum edge (as decimal) to trigger a trade
# 0.08 = 8% edge required
MIN_EDGE_THRESHOLD=0.08

# Take profit threshold (0.10 = 10%)
TAKE_PROFIT_THRESHOLD=0.10

# Stop loss threshold (-0.15 = -15%)
STOP_LOSS_THRESHOLD=-0.15

# Polling interval in milliseconds (300000 = 5 minutes)
POLL_INTERVAL_MS=300000

# Forecast polling interval in milliseconds (30000 = 30 seconds)
# CRITICAL for speed arbitrage - this controls how often we check for weather changes
# Lower = more responsive to forecast changes, but more API calls
FORECAST_POLL_INTERVAL_MS=30000

# =============================================================================
# STRATEGY CONFIGURATION (NEW)
# =============================================================================

# --- Speed Arbitrage Strategy ---
ENABLE_SPEED_ARBITRAGE=true
# Minimum sigma for speed arbitrage (0.0 = relaxed)
SPEED_ARB_MIN_SIGMA=0.0
# Max age of forecast change to act on (in ms)
SPEED_ARB_MAX_CHANGE_AGE_MS=120000
# Minimum confidence threshold for speed arb trades
SPEED_ARB_MIN_CONFIDENCE=0.75

# --- Cross-Market Arbitrage Strategy ---
ENABLE_CROSS_MARKET_ARBITRAGE=true
# Minimum edge for cross-market trades
CROSS_MARKET_MIN_EDGE=0.06
# Minimum correlation coefficient (0-1)
CROSS_MARKET_MIN_CORRELATION=0.70
# Maximum time lag between markets (minutes)
CROSS_MARKET_MAX_LAG_MINUTES=180

# --- Market Impact Model ---
ENABLE_MARKET_IMPACT_MODEL=true
# Maximum acceptable market impact (slippage)
MAX_MARKET_IMPACT_THRESHOLD=0.02
# Enable position scaling for large orders
ENABLE_POSITION_SCALING=true
# Threshold to start scaling positions ($)
POSITION_SCALE_THRESHOLD=100
# Market impact constants (k-values)
MARKET_IMPACT_CONSTANT_LOW=0.3
MARKET_IMPACT_CONSTANT_MEDIUM=0.8
MARKET_IMPACT_CONSTANT_HIGH=1.5

# --- Risk Management ---
# Kelly fraction for position sizing (0.25 = quarter Kelly)
KELLY_FRACTION=0.25
# Enable trailing stops
TRAILING_STOP_ENABLED=true
# Profit level to activate trailing stop
TRAILING_STOP_ACTIVATION=0.05
# Trailing stop offset distance
TRAILING_STOP_OFFSET=0.02

# =============================================================================
# WEBHOOK-BASED FORECAST DETECTION
# =============================================================================

# Tomorrow.io Webhook Configuration
TOMORROW_WEBHOOK_SECRET=your_webhook_secret_here

# Webhook Mode Settings
USE_WEBHOOK_MODE=true
FETCH_MODE_TIMEOUT_MINUTES=10
NO_CHANGE_EXIT_MINUTES=5
PROVIDER_POLL_INTERVAL_MS=5000
IDLE_POLL_INTERVAL_MINUTES=5

# =============================================================================
# FILE-BASED INGESTION CONFIGURATION
# =============================================================================

# Enable file-based ingestion (default: true)
ENABLE_FILE_BASED_INGESTION=true

# S3 poll interval in milliseconds (default: 150)
# Lower = faster detection but more S3 requests
# Recommended: 100-250ms
S3_POLL_INTERVAL_MS=150

# Detection window buffer in minutes (default: 5)
# Start polling this many minutes before expected publication
DETECTION_WINDOW_BUFFER_MINUTES=5

# Enable adaptive detection windows based on history
ENABLE_ADAPTIVE_DETECTION_WINDOWS=true
# Minimum observations before adapting windows
ADAPTIVE_WINDOW_MIN_OBSERVATIONS=5

# API fallback max duration in minutes (default: 5)
# How long to poll APIs if file not detected
API_FALLBACK_MAX_DURATION_MINUTES=5

# Forecast change thresholds
# Temperature change threshold in Celsius (default: 0.5)
FORECAST_CHANGE_THRESHOLD_CELSIUS=0.5

# Wind speed change threshold in KPH (default: 2)
FORECAST_CHANGE_THRESHOLD_WIND_KPH=2

# Precipitation change threshold in mm (default: 0.1)
FORECAST_CHANGE_THRESHOLD_PRECIP_MM=0.1

# =============================================================================
# LOGGING
# =============================================================================

# Logging level (debug, info, warn, error)
LOG_LEVEL=info

# =============================================================================
# WEB SERVER CONFIGURATION
# =============================================================================

# Web Server Port - The port on which the dashboard and webhook endpoint run
PORT=8188
